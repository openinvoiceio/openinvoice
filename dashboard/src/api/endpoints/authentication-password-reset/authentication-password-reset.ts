/**
 * Generated by orval v7.17.0 üç∫
 * Do not edit manually.
 * Invoicence API
 * Description
 * OpenAPI spec version: 1.0.0
 */
import { useMutation, useQuery, useSuspenseQuery } from "@tanstack/react-query";
import type {
  DataTag,
  DefinedInitialDataOptions,
  DefinedUseQueryResult,
  MutationFunction,
  QueryClient,
  QueryFunction,
  QueryKey,
  UndefinedInitialDataOptions,
  UseMutationOptions,
  UseMutationResult,
  UseQueryOptions,
  UseQueryResult,
  UseSuspenseQueryOptions,
  UseSuspenseQueryResult,
} from "@tanstack/react-query";
import { axiosInstance } from "../../../lib/api/client";
import type { ErrorType } from "../../../lib/api/client";
import type {
  AuthenticatedByPasswordResponse,
  AuthenticationResponse,
  ConflictResponse,
  ErrorResponse,
  PasswordResetInfoResponse,
  RequestPasswordBody,
  ResetPasswordBody,
  StatusOKResponse,
} from "../../models";

type SecondParameter<T extends (...args: never) => unknown> = Parameters<T>[1];

/**
 * Initiates the password reset procedure. Depending on whether or not
`ACCOUNT_PASSWORD_RESET_BY_CODE_ENABLED` is `True`, the procedure is
either stateless or stateful.

In case codes are used, it is stateful, and a new
`password_reset_by_code` flow is started. In this case, on a successful
password reset request, you will receive a 401 indicating the pending
status of this flow.

In case password reset is configured to use (stateless) links, you will
receive a 200 on a successful password reset request.

 * @summary Request password
 */
export const requestPasswordReset = (
  client: "app" | "browser",
  requestPasswordBody: RequestPasswordBody,
  options?: SecondParameter<typeof axiosInstance>,
  signal?: AbortSignal,
) => {
  return axiosInstance<StatusOKResponse>(
    {
      url: `/api/${client}/v1/auth/password/request`,
      method: "POST",
      headers: { "Content-Type": "application/json" },
      data: requestPasswordBody,
      signal,
    },
    options,
  );
};

export const getRequestPasswordResetMutationOptions = <
  TError = ErrorType<ErrorResponse | AuthenticationResponse>,
  TContext = unknown,
>(options?: {
  mutation?: UseMutationOptions<
    Awaited<ReturnType<typeof requestPasswordReset>>,
    TError,
    { client: "app" | "browser"; data: RequestPasswordBody },
    TContext
  >;
  request?: SecondParameter<typeof axiosInstance>;
}): UseMutationOptions<
  Awaited<ReturnType<typeof requestPasswordReset>>,
  TError,
  { client: "app" | "browser"; data: RequestPasswordBody },
  TContext
> => {
  const mutationKey = ["requestPasswordReset"];
  const { mutation: mutationOptions, request: requestOptions } = options
    ? options.mutation &&
      "mutationKey" in options.mutation &&
      options.mutation.mutationKey
      ? options
      : { ...options, mutation: { ...options.mutation, mutationKey } }
    : { mutation: { mutationKey }, request: undefined };

  const mutationFn: MutationFunction<
    Awaited<ReturnType<typeof requestPasswordReset>>,
    { client: "app" | "browser"; data: RequestPasswordBody }
  > = (props) => {
    const { client, data } = props ?? {};

    return requestPasswordReset(client, data, requestOptions);
  };

  return { mutationFn, ...mutationOptions };
};

export type RequestPasswordResetMutationResult = NonNullable<
  Awaited<ReturnType<typeof requestPasswordReset>>
>;
export type RequestPasswordResetMutationBody = RequestPasswordBody;
export type RequestPasswordResetMutationError = ErrorType<
  ErrorResponse | AuthenticationResponse
>;

/**
 * @summary Request password
 */
export const useRequestPasswordReset = <
  TError = ErrorType<ErrorResponse | AuthenticationResponse>,
  TContext = unknown,
>(
  options?: {
    mutation?: UseMutationOptions<
      Awaited<ReturnType<typeof requestPasswordReset>>,
      TError,
      { client: "app" | "browser"; data: RequestPasswordBody },
      TContext
    >;
    request?: SecondParameter<typeof axiosInstance>;
  },
  queryClient?: QueryClient,
): UseMutationResult<
  Awaited<ReturnType<typeof requestPasswordReset>>,
  TError,
  { client: "app" | "browser"; data: RequestPasswordBody },
  TContext
> => {
  const mutationOptions = getRequestPasswordResetMutationOptions(options);

  return useMutation(mutationOptions, queryClient);
};
/**
 * Used to obtain information on and validate a password reset key.  The
key passed is either the key encoded in the password reset URL that the
user has received per email, or, the password reset code in case of
`ACCOUNT_PASSWORD_RESET_BY_CODE_ENABLED`. Note that in case of a code,
the number of requests you can make is limited (by
`ACCOUNT_PASSWORD_RESET_BY_CODE_MAX_ATTEMPTS`).

 * @summary Get password reset information
 */
export const getResetPassword = (
  client: "app" | "browser",
  options?: SecondParameter<typeof axiosInstance>,
  signal?: AbortSignal,
) => {
  return axiosInstance<PasswordResetInfoResponse>(
    { url: `/api/${client}/v1/auth/password/reset`, method: "GET", signal },
    options,
  );
};

export const getGetResetPasswordQueryKey = (client?: "app" | "browser") => {
  return [`/api/${client}/v1/auth/password/reset`] as const;
};

export const getGetResetPasswordQueryOptions = <
  TData = Awaited<ReturnType<typeof getResetPassword>>,
  TError = ErrorType<ErrorResponse | ConflictResponse>,
>(
  client: "app" | "browser",
  options?: {
    query?: Partial<
      UseQueryOptions<
        Awaited<ReturnType<typeof getResetPassword>>,
        TError,
        TData
      >
    >;
    request?: SecondParameter<typeof axiosInstance>;
  },
) => {
  const { query: queryOptions, request: requestOptions } = options ?? {};

  const queryKey =
    queryOptions?.queryKey ?? getGetResetPasswordQueryKey(client);

  const queryFn: QueryFunction<
    Awaited<ReturnType<typeof getResetPassword>>
  > = ({ signal }) => getResetPassword(client, requestOptions, signal);

  return {
    queryKey,
    queryFn,
    enabled: !!client,
    ...queryOptions,
  } as UseQueryOptions<
    Awaited<ReturnType<typeof getResetPassword>>,
    TError,
    TData
  > & { queryKey: DataTag<QueryKey, TData, TError> };
};

export type GetResetPasswordQueryResult = NonNullable<
  Awaited<ReturnType<typeof getResetPassword>>
>;
export type GetResetPasswordQueryError = ErrorType<
  ErrorResponse | ConflictResponse
>;

export function useGetResetPassword<
  TData = Awaited<ReturnType<typeof getResetPassword>>,
  TError = ErrorType<ErrorResponse | ConflictResponse>,
>(
  client: "app" | "browser",
  options: {
    query: Partial<
      UseQueryOptions<
        Awaited<ReturnType<typeof getResetPassword>>,
        TError,
        TData
      >
    > &
      Pick<
        DefinedInitialDataOptions<
          Awaited<ReturnType<typeof getResetPassword>>,
          TError,
          Awaited<ReturnType<typeof getResetPassword>>
        >,
        "initialData"
      >;
    request?: SecondParameter<typeof axiosInstance>;
  },
  queryClient?: QueryClient,
): DefinedUseQueryResult<TData, TError> & {
  queryKey: DataTag<QueryKey, TData, TError>;
};
export function useGetResetPassword<
  TData = Awaited<ReturnType<typeof getResetPassword>>,
  TError = ErrorType<ErrorResponse | ConflictResponse>,
>(
  client: "app" | "browser",
  options?: {
    query?: Partial<
      UseQueryOptions<
        Awaited<ReturnType<typeof getResetPassword>>,
        TError,
        TData
      >
    > &
      Pick<
        UndefinedInitialDataOptions<
          Awaited<ReturnType<typeof getResetPassword>>,
          TError,
          Awaited<ReturnType<typeof getResetPassword>>
        >,
        "initialData"
      >;
    request?: SecondParameter<typeof axiosInstance>;
  },
  queryClient?: QueryClient,
): UseQueryResult<TData, TError> & {
  queryKey: DataTag<QueryKey, TData, TError>;
};
export function useGetResetPassword<
  TData = Awaited<ReturnType<typeof getResetPassword>>,
  TError = ErrorType<ErrorResponse | ConflictResponse>,
>(
  client: "app" | "browser",
  options?: {
    query?: Partial<
      UseQueryOptions<
        Awaited<ReturnType<typeof getResetPassword>>,
        TError,
        TData
      >
    >;
    request?: SecondParameter<typeof axiosInstance>;
  },
  queryClient?: QueryClient,
): UseQueryResult<TData, TError> & {
  queryKey: DataTag<QueryKey, TData, TError>;
};
/**
 * @summary Get password reset information
 */

export function useGetResetPassword<
  TData = Awaited<ReturnType<typeof getResetPassword>>,
  TError = ErrorType<ErrorResponse | ConflictResponse>,
>(
  client: "app" | "browser",
  options?: {
    query?: Partial<
      UseQueryOptions<
        Awaited<ReturnType<typeof getResetPassword>>,
        TError,
        TData
      >
    >;
    request?: SecondParameter<typeof axiosInstance>;
  },
  queryClient?: QueryClient,
): UseQueryResult<TData, TError> & {
  queryKey: DataTag<QueryKey, TData, TError>;
} {
  const queryOptions = getGetResetPasswordQueryOptions(client, options);

  const query = useQuery(queryOptions, queryClient) as UseQueryResult<
    TData,
    TError
  > & { queryKey: DataTag<QueryKey, TData, TError> };

  query.queryKey = queryOptions.queryKey;

  return query;
}

export const getGetResetPasswordSuspenseQueryOptions = <
  TData = Awaited<ReturnType<typeof getResetPassword>>,
  TError = ErrorType<ErrorResponse | ConflictResponse>,
>(
  client: "app" | "browser",
  options?: {
    query?: Partial<
      UseSuspenseQueryOptions<
        Awaited<ReturnType<typeof getResetPassword>>,
        TError,
        TData
      >
    >;
    request?: SecondParameter<typeof axiosInstance>;
  },
) => {
  const { query: queryOptions, request: requestOptions } = options ?? {};

  const queryKey =
    queryOptions?.queryKey ?? getGetResetPasswordQueryKey(client);

  const queryFn: QueryFunction<
    Awaited<ReturnType<typeof getResetPassword>>
  > = ({ signal }) => getResetPassword(client, requestOptions, signal);

  return { queryKey, queryFn, ...queryOptions } as UseSuspenseQueryOptions<
    Awaited<ReturnType<typeof getResetPassword>>,
    TError,
    TData
  > & { queryKey: DataTag<QueryKey, TData, TError> };
};

export type GetResetPasswordSuspenseQueryResult = NonNullable<
  Awaited<ReturnType<typeof getResetPassword>>
>;
export type GetResetPasswordSuspenseQueryError = ErrorType<
  ErrorResponse | ConflictResponse
>;

export function useGetResetPasswordSuspense<
  TData = Awaited<ReturnType<typeof getResetPassword>>,
  TError = ErrorType<ErrorResponse | ConflictResponse>,
>(
  client: "app" | "browser",
  options: {
    query: Partial<
      UseSuspenseQueryOptions<
        Awaited<ReturnType<typeof getResetPassword>>,
        TError,
        TData
      >
    >;
    request?: SecondParameter<typeof axiosInstance>;
  },
  queryClient?: QueryClient,
): UseSuspenseQueryResult<TData, TError> & {
  queryKey: DataTag<QueryKey, TData, TError>;
};
export function useGetResetPasswordSuspense<
  TData = Awaited<ReturnType<typeof getResetPassword>>,
  TError = ErrorType<ErrorResponse | ConflictResponse>,
>(
  client: "app" | "browser",
  options?: {
    query?: Partial<
      UseSuspenseQueryOptions<
        Awaited<ReturnType<typeof getResetPassword>>,
        TError,
        TData
      >
    >;
    request?: SecondParameter<typeof axiosInstance>;
  },
  queryClient?: QueryClient,
): UseSuspenseQueryResult<TData, TError> & {
  queryKey: DataTag<QueryKey, TData, TError>;
};
export function useGetResetPasswordSuspense<
  TData = Awaited<ReturnType<typeof getResetPassword>>,
  TError = ErrorType<ErrorResponse | ConflictResponse>,
>(
  client: "app" | "browser",
  options?: {
    query?: Partial<
      UseSuspenseQueryOptions<
        Awaited<ReturnType<typeof getResetPassword>>,
        TError,
        TData
      >
    >;
    request?: SecondParameter<typeof axiosInstance>;
  },
  queryClient?: QueryClient,
): UseSuspenseQueryResult<TData, TError> & {
  queryKey: DataTag<QueryKey, TData, TError>;
};
/**
 * @summary Get password reset information
 */

export function useGetResetPasswordSuspense<
  TData = Awaited<ReturnType<typeof getResetPassword>>,
  TError = ErrorType<ErrorResponse | ConflictResponse>,
>(
  client: "app" | "browser",
  options?: {
    query?: Partial<
      UseSuspenseQueryOptions<
        Awaited<ReturnType<typeof getResetPassword>>,
        TError,
        TData
      >
    >;
    request?: SecondParameter<typeof axiosInstance>;
  },
  queryClient?: QueryClient,
): UseSuspenseQueryResult<TData, TError> & {
  queryKey: DataTag<QueryKey, TData, TError>;
} {
  const queryOptions = getGetResetPasswordSuspenseQueryOptions(client, options);

  const query = useSuspenseQuery(
    queryOptions,
    queryClient,
  ) as UseSuspenseQueryResult<TData, TError> & {
    queryKey: DataTag<QueryKey, TData, TError>;
  };

  query.queryKey = queryOptions.queryKey;

  return query;
}

/**
 * Perform the password reset, by handing over the password reset key and
the new password. After successfully completing the password reset, the
user is either logged in (in case `ACCOUNT_LOGIN_ON_PASSWORD_RESET` is
`True`), or, the user will need to proceed to the login page.  In case
of the former, a `200` status code is returned, in case of the latter a
401.

 * @summary Reset password
 */
export const resetPassword = (
  client: "app" | "browser",
  resetPasswordBody: ResetPasswordBody,
  options?: SecondParameter<typeof axiosInstance>,
  signal?: AbortSignal,
) => {
  return axiosInstance<AuthenticatedByPasswordResponse>(
    {
      url: `/api/${client}/v1/auth/password/reset`,
      method: "POST",
      headers: { "Content-Type": "application/json" },
      data: resetPasswordBody,
      signal,
    },
    options,
  );
};

export const getResetPasswordMutationOptions = <
  TError = ErrorType<ErrorResponse | AuthenticationResponse | ConflictResponse>,
  TContext = unknown,
>(options?: {
  mutation?: UseMutationOptions<
    Awaited<ReturnType<typeof resetPassword>>,
    TError,
    { client: "app" | "browser"; data: ResetPasswordBody },
    TContext
  >;
  request?: SecondParameter<typeof axiosInstance>;
}): UseMutationOptions<
  Awaited<ReturnType<typeof resetPassword>>,
  TError,
  { client: "app" | "browser"; data: ResetPasswordBody },
  TContext
> => {
  const mutationKey = ["resetPassword"];
  const { mutation: mutationOptions, request: requestOptions } = options
    ? options.mutation &&
      "mutationKey" in options.mutation &&
      options.mutation.mutationKey
      ? options
      : { ...options, mutation: { ...options.mutation, mutationKey } }
    : { mutation: { mutationKey }, request: undefined };

  const mutationFn: MutationFunction<
    Awaited<ReturnType<typeof resetPassword>>,
    { client: "app" | "browser"; data: ResetPasswordBody }
  > = (props) => {
    const { client, data } = props ?? {};

    return resetPassword(client, data, requestOptions);
  };

  return { mutationFn, ...mutationOptions };
};

export type ResetPasswordMutationResult = NonNullable<
  Awaited<ReturnType<typeof resetPassword>>
>;
export type ResetPasswordMutationBody = ResetPasswordBody;
export type ResetPasswordMutationError = ErrorType<
  ErrorResponse | AuthenticationResponse | ConflictResponse
>;

/**
 * @summary Reset password
 */
export const useResetPassword = <
  TError = ErrorType<ErrorResponse | AuthenticationResponse | ConflictResponse>,
  TContext = unknown,
>(
  options?: {
    mutation?: UseMutationOptions<
      Awaited<ReturnType<typeof resetPassword>>,
      TError,
      { client: "app" | "browser"; data: ResetPasswordBody },
      TContext
    >;
    request?: SecondParameter<typeof axiosInstance>;
  },
  queryClient?: QueryClient,
): UseMutationResult<
  Awaited<ReturnType<typeof resetPassword>>,
  TError,
  { client: "app" | "browser"; data: ResetPasswordBody },
  TContext
> => {
  const mutationOptions = getResetPasswordMutationOptions(options);

  return useMutation(mutationOptions, queryClient);
};
